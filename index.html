<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shift Management Web App</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://unpkg.com/vue@3"></script>
</head>
<body>
<div id="app" class="container mt-5">
    <h2 class="text-center mb-4">Shift Management</h2>
    <button class="btn btn-primary mb-3" @click="showAddModal">Add New Shift</button>

    <table class="table table-bordered table-striped">
        <thead class="table-dark">
        <tr>
            <th>Shift ID</th>
            <th>Location</th>
            <th>Date</th>
            <th>Start Time</th>
            <th>End Time</th>
            <th>MAP Staff</th>
            <th>Gender</th>
            <th>Original Message</th>
            <th>Date Received</th>
            <th>Time Received</th>
            <th>Coordinator</th>
            <th>Assigned To</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr v-for="shift in shifts" :key="shift.shiftId">
            <td>{{ shift.shiftId }}</td>
            <td>{{ shift.location }}</td>
            <td>{{ shift.date }}</td>
            <td>{{ shift.startTime }}</td>
            <td>{{ shift.endTime }}</td>
            <td>{{ shift.mapStaff }}</td>
            <td>{{ shift.gender }}</td>
            <td>{{ shift.originalMessage }}</td>
            <td>{{ shift.dateReceived }}</td>
            <td>{{ shift.timeReceived }}</td>
            <td>{{ shift.coordinator }}</td>
            <td>{{ shift.assignedTo }}</td>
            <td>{{ shift.status }}</td>
            <td>
                <button class="btn btn-sm btn-warning" @click="showEditModal(shift)">Edit</button>
                <button class="btn btn-sm btn-danger" @click="deleteShift(shift.shiftId)">Delete</button>
            </td>
        </tr>
        </tbody>
    </table>

    <!-- Modal for Adding/Editing Shifts -->
    <div class="modal fade" tabindex="-1" v-if="isModalVisible">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{{ isEditing ? 'Edit Shift' : 'Add New Shift' }}</h5>
                    <button type="button" class="btn-close" @click="hideModal"></button>
                </div>
                $1
                        <div class="mb-3">
                            <label for="coordinator" class="form-label">Coordinator</label>
                            <input type="text" id="coordinator" v-model="form.coordinator" class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="assignedTo" class="form-label">Assigned To</label>
                            <input type="text" id="assignedTo" v-model="form.assignedTo" class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="location" class="form-label">Location</label>
                            <input type="text" id="location" v-model="form.location" class="form-control" required>
                            <div v-if="validationErrors.location" class="text-danger">{{ validationErrors.location }}</div>
                        </div>
                        <div class="mb-3">
                            <label for="date" class="form-label">Date</label>
                            <input type="date" id="date" v-model="form.date" class="form-control" required>
                            <div v-if="validationErrors.date" class="text-danger">{{ validationErrors.date }}</div>
                        </div>
                        <div class="mb-3">
                            <label for="startTime" class="form-label">Start Time</label>
                            <input type="time" id="startTime" v-model="form.startTime" class="form-control" required>
                            <div v-if="validationErrors.startTime" class="text-danger">{{ validationErrors.startTime }}</div>
                        </div>
                        <div class="mb-3">
                            <label for="endTime" class="form-label">End Time</label>
                            <input type="time" id="endTime" v-model="form.endTime" class="form-control" required>
                            <div v-if="validationErrors.endTime" class="text-danger">{{ validationErrors.endTime }}</div>
                        </div>
                        <div class="mb-3">
                            <label for="mapStaff" class="form-label">MAP Staff</label>
                            <input type="text" id="mapStaff" v-model="form.mapStaff" class="form-control" required>
                            <div v-if="validationErrors.mapStaff" class="text-danger">{{ validationErrors.mapStaff }}</div>
                        </div>
                        <div class="mb-3">
                            <label for="gender" class="form-label">Gender</label>
                            <input type="text" id="gender" v-model="form.gender" class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="originalMessage" class="form-label">Original Message</label>
                            <textarea id="originalMessage" v-model="form.originalMessage" class="form-control"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="coordinator" class="form-label">Coordinator</label>
                            <input type="text" id="coordinator" v-model="form.coordinator" class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="assignedTo" class="form-label">Assigned To</label>
                            <input type="text" id="assignedTo" v-model="form.assignedTo" class="form-control">
                        </div>
                        $1
                        
                        
                        
                        
                        $1
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" @click="hideModal">Cancel</button>
                            <button type="submit" class="btn btn-primary">{{ isEditing ? 'Update' : 'Add' }} Shift</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const app = Vue.createApp({
        data() {
            return {
                shifts: [],
                isModalVisible: false,
                isEditing: false,
                form: {
                    shiftId: '',
                    location: '',
                    date: '',
                    startTime: '',
                    endTime: '',
                    mapStaff: '',
                    gender: '',
                    originalMessage: '',
                    dateReceived: '',
                    timeReceived: '',
                    coordinator: '',
                    assignedTo: '',
                    status: ''
                },
                validationErrors: {}
            };
        },
        methods: {
            showAddModal() {
                this.isModalVisible = true;
                this.isEditing = false;
                this.resetForm();
            },
            showEditModal(shift) {
                this.isModalVisible = true;
                this.isEditing = true;
                this.form = { ...shift };
            },
            hideModal() {
                this.isModalVisible = false;
                this.resetForm();
            },
            addShift() {
                if (this.validateForm()) {
                    this.form.shiftId = Date.now();
                    this.shifts.push({ ...this.form });
                    this.hideModal();
                }
            },
            updateShift() {
                if (this.validateForm()) {
                    const index = this.shifts.findIndex(shift => shift.shiftId === this.form.shiftId);
                    if (index !== -1) {
                        this.shifts[index] = { ...this.form };
                    }
                    this.hideModal();
                }
            },
            deleteShift(shiftId) {
                this.shifts = this.shifts.filter(shift => shift.shiftId !== shiftId);
            },
            resetForm() {
                this.form = {
                    shiftId: '',
                    location: '',
                    date: '',
                    startTime: '',
                    endTime: '',
                    mapStaff: '',
                    gender: '',
                    originalMessage: '',
                    dateReceived: '',
                    timeReceived: '',
                    coordinator: '',
                    assignedTo: '',
                    status: ''
                };
                this.validationErrors = {};
            },
            validateForm() {
                this.validationErrors = {};

                if (!this.form.location) {
                    this.validationErrors.location = "Location is required";
                }
                if (!this.form.date) {
                    this.validationErrors.date = "Date is required";
                }
                if (!this.form.startTime) {
                    this.validationErrors.startTime = "Start time is required";
                }
                if (!this.form.endTime) {
                    this.validationErrors.endTime = "End time is required";
                }
                if (!this.form.mapStaff) {
                    this.validationErrors.mapStaff = "MAP Staff is required";
                }

                return Object.keys(this.validationErrors).length === 0;
            }
        }
    });
    app.mount('#app');
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
